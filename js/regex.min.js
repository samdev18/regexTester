function executa(event){event.preventDefault(),limparResultados();var valores=pegarValoresDoForm(),resultados=executarRegex(valores);imprimirResultadoNoInput(resultados),highlightResultados(resultados,valores.target)}function executarRegex(valores){for(var textoPattern=valores.pattern,textoTarget=valores.target,mostraIndex=valores.mostraIndex,resultados=[],resultado=null,objetoRegex=new RegExp(textoPattern,"g");resultado=objetoRegex.exec(textoTarget);){if(""===resultado[0])throw Error("Regex retornou valor vazio.");resultados.push(gerarResultado(resultado[0],resultado.index,objetoRegex.lastIndex,mostraIndex))}return logEmTempoDeExecucao(textoPattern,textoTarget),resultados}function gerarResultado(resultado,index,lastIndex,mostraIndex){var textoIndex;return{resultado:resultado+(mostraIndex?" ["+index+"-"+lastIndex+"]":""),index:index,lastIndex:lastIndex}}function logEmTempoDeExecucao(textoPattern,textoTarget){var pObjetoRegex=new RegExp(textoPattern,"g"),ini=performance.now();pObjetoRegex.test(textoTarget);var fim=performance.now();console.log("Tempo de execução (ms) "+(fim-ini))}function imprimirResultadoNoInput(resultados){var inputResultado=document.querySelector("#resultado"),labelResultado=document.querySelector("#labelResultados");labelResultado.innerHTML=resultados.length+" Matches (resultados)";var resultadosComoArray=resultados.map((function(item){return item.resultado}));labelResultado.innerHTML=resultadosComoArray.length+" Matches (resultados)",resultadosComoArray.length>0?(inputResultado.value=resultadosComoArray.join(" | "),inputResultado.style.borderStyle="solid",inputResultado.style.borderColor="lime"):(inputResultado.placeholder="Sem matches (resultados)",inputResultado.value="",inputResultado.style.borderStyle="solid",inputResultado.style.borderColor="red")}function highlightResultados(resultados,texto){for(var item=null,indexBegin=0,conteudo="";null!=(item=resultados.shift());)conteudo+=semHighlight(escapeHtml(texto.substring(indexBegin,item.index))),conteudo+=comHighlight(escapeHtml(texto.substring(item.index,item.lastIndex))),indexBegin=item.lastIndex;texto.length-indexBegin>0&&(conteudo+=semHighlight(escapeHtml(texto.substring(indexBegin,texto.length)))),document.querySelector("#highlightText").innerHTML=conteudo}function semHighlight(texto){return texto}function comHighlight(texto){return"<span class='bg-primary'>"+texto+"</span>"}function escapeHtml(string){return string.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pegarValoresDoForm(){var inputTarget=document.querySelector("#target"),inputPattern=document.querySelector("#pattern");inputPattern.focus();var checkboxIndex=document.querySelector("#mostraIndex");return _verificarInputs(inputTarget,inputPattern),{target:inputTarget.value.trim(),pattern:inputPattern.value,mostraIndex:checkboxIndex.checked}}function _verificarInputs(inputTarget,inputPattern){if(inputTarget.value||(inputTarget.placeholder="Digite um target"),inputPattern.value||(inputPattern.placeholder="Digite um pattern"),!inputTarget.value||!inputPattern.value)throw Error("Valores invalidos")}function limparResultados(){console.clear(),document.querySelector("#labelResultados").innerHTML="0 Matches (resultados)",document.querySelector("#resultado").value="",document.querySelector("#resultado").placeholder="sem resultado",document.querySelector("#highlightText").innerHTML="<em>sem resultado</em>"}function montarPatternDeDataMaisLegivel(){var DIA,_DE_="\\s+(de )?\\s*",MES,ANO;return"[0123]?\\d"+_DE_+"[A-Za-z][a-zç]{3,8}"+_DE_+"[12]\\d{3}"}